<!doctype html>
<html ng-app="myApp">

<head>
    <meta charset="UTF-8">
    <title>建立leave及並行動畫-JavaScript動畫</title>
    <script src="https://code.angularjs.org/1.7.4/angular.min.js"></script>
    <script src="https://code.angularjs.org/1.7.4/angular-animate.min.js"></script>
    <script src="https://code.angularjs.org/1.7.4/angular-route.min.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <style>
        .link-container {
    position:absolute;
    top:320px;
}
.animate-container {
    position:absolute;
}
.animate-container div {
    width:300px;
    text-align:center;
    line-height:300px;
    border:1px solid black;
}

    </style>

    <script language="javascript">
        var app = angular.module("myApp", ['ngAnimate', 'ngRoute']);

        app.config(function ($routeProvider) {
            $routeProvider
                .when('/bar', {
                    templateUrl: 'bar.html'
                })
                .otherwise({
                    templateUrl: 'foo.html'
                });
        });

        app.animation('.animate-container', function () {
            return {
                enter: function (element, done) {
                    $(element).css({ 'top': '-300px' });
                    $(element).delay(500).animate({ 'top': '0px' }, 500, done);
                },
                leave: function (element, done) {
                    $(element).css({ 'top': '0px' });
                    $(element).delay(500).animate({ 'top': '-300px' }, 500, done);
                },
            };
        });
    </script>
</head>

<body>
    <div>
        <ng-view class="animate-container"></ng-view>
        <div class="link-container">
            <a href="#!/foo">Foo</a>
            <a href="#!/bar">Bar</a>
        </div>

        <script type="text/ng-template" id="foo.html">
            <div>
                <span>Foo</span>
            </div>
        </script>

        <script type="text/ng-template" id="bar.html">
            <div>
                <span>Bar</span>
            </div>
        </script>
    </div>
    <pre>


















    <hr>
        ngIf：在DOM移除ngIf的內容之前觸發leave事件。
        ngInclude：當既有所含括的內容需要加入動畫時，便觸發leave事件。
        ngRepeat：當從清單移除一個項目，或過濾掉某個項目時，便觸發leave事件。
        ngSwitch：當ngSwitch的內容改變之後，並在DOM移除先前的內容之前，便觸發leave事件。
        ngView：當既有的ngView內容需要加入動畫時，便觸發leave事件。
        ngMessage：當移除內部訊息時，便觸發leave事件。
    </pre>
</body>

</html>